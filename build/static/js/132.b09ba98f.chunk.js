"use strict";(self.webpackChunkmallbb_project=self.webpackChunkmallbb_project||[]).push([[132],{1895:(e,t,a)=>{a.d(t,{HD:()=>o,TF:()=>r,UU:()=>u,kz:()=>l,vS:()=>c,w8:()=>d});var n=a(7560),s=a(9641);const i="".concat(s.i,"/r"),c=async e=>{const{page:t,size:a}=e;return(await s.C.get("".concat(i,"/l"),{params:{page:t,size:a}})).data},o=async e=>(await s.C.get("".concat(i,"/").concat(e))).data,l=async e=>(await n.A.post("".concat(i,"/"),e,{headers:{"Content-Type":"multipart/form-data"}})).data,r=async e=>(await n.A.delete("".concat(i,"/").concat(e))).data,d=e=>"".concat(i,"/view/").concat(encodeURIComponent(e)),u=async(e,t)=>(await n.A.put("".concat(i,"/").concat(t),e,{headers:{"Content-Type":"multipart/form-data"}})).data},3132:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(9379),s=a(5043),i=a(1895),c=a(5822),o=a(1517),l=a(726),r=a.n(l),d=a(6287),u=a(579);const m={title:"",content:"",bakeryId:""};function p(){const[e,t]=(0,s.useState)(m),[a,l]=(0,s.useState)([]),p=(0,s.useRef)(null),{moveToPath:x}=(0,c.A)();(0,s.useEffect)(()=>{(async()=>{const e=await(0,d.p)();l(e)})()},[]);const g=e=>{const{name:a,value:s}=e.target;t(e=>(0,n.A)((0,n.A)({},e),{},{[a]:s}))};return(0,u.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-8",children:[(0,u.jsx)("h1",{className:"mb-6 text-2xl font-semibold",children:"\uae00 \ub4f1\ub85d"}),(0,u.jsxs)("div",{className:"space-y-5 rounded-2xl bg-white p-6 shadow",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"\uc81c\ubaa9"}),(0,u.jsx)("input",{id:"title",type:"text",name:"title",placeholder:"\uc81c\ubaa9",value:e.title,onChange:g,className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-2 outline-none transition\r focus:border-indigo-400 focus:bg-white focus:ring-2 focus:ring-indigo-200"})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{htmlFor:"content",className:"text-sm font-medium text-gray-700",children:"\ub0b4\uc6a9"}),(0,u.jsx)(o.aF,{editor:r(),style:{minHeight:"200px"},placeholder:"\ub0b4\uc6a9",data:e.content,onChange:(e,t)=>{g({target:{name:"content",value:t.getData()}})}})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\uac00\uac8c \uc120\ud0dd"}),(0,u.jsxs)("select",{name:"bakeryId",value:e.bakeryId,onChange:g,className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-2 outline-none transition focus:border-indigo-400 focus:bg-white focus:ring-2 focus:ring-indigo-200",children:[(0,u.jsx)("option",{value:"",children:"\uac00\uac8c\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),a.map(e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{htmlFor:"files",className:"text-sm font-medium text-gray-700",children:"\ud30c\uc77c \ucca8\ubd80"}),(0,u.jsx)("input",{id:"files",type:"file",multiple:!0,ref:p,className:"block w-full text-sm text-gray-700\r file:mr-4 file:rounded-xl file:border-0 file:bg-indigo-50 file:px-4 file:py-2 file:text-indigo-700\r hover:file:bg-indigo-100"})]}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)("button",{type:"button",onClick:async()=>{var a;if(!e.title.trim()||!e.content.trim())return void alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694");const n=e.content.replace(/<\/?[^>]+>/g,"").trim(),s=new FormData;s.append("title",e.title),s.append("content",n),s.append("bakeryId",e.bakeryId);const c=null===(a=p.current)||void 0===a?void 0:a.files;if(c&&c.length>0)for(let e=0;e<c.length;e++)s.append("files",c[e]);try{const e=await(0,i.kz)(s);console.log("\ub4f1\ub85d\uc131\uacf5:",e),alert("\ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),t(m),p.current&&(p.current.value=""),x("/review",!0)}catch(o){console.error("\ub4f1\ub85d\uc2e4\ud328:",o),alert("\ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4")}},className:"inline-flex items-center rounded-xl bg-indigo-600 px-5 py-2.5 text-sm font-medium text-white shadow\r hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400 active:translate-y-px",children:"\uae00 \ub4f1\ub85d"})})]})]})}const x=()=>(0,u.jsx)("div",{className:"bg-[#F4C455]",children:(0,u.jsx)(p,{})})},6287:(e,t,a)=>{a.d(t,{V:()=>c,p:()=>i});a(7560);var n=a(9641);const s="".concat(n.i,"/api/bakeries"),i=async()=>{try{return(await n.C.get("".concat(s,"/"))).data}catch(e){return console.error("Bakery API \ud638\ucd9c \uc2e4\ud328:",e),[]}},c=async e=>(await n.C.get("".concat(s,"/product/").concat(e))).data}}]);
//# sourceMappingURL=132.b09ba98f.chunk.js.map